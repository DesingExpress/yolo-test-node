{"ast":null,"code":"import _slicedToArray from \"/Users/kim-euntae/Documents/Dev/yolov8-nxv/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { styled } from \"@mui/material\";\nimport * as tf from \"@tensorflow/tfjs\";\nimport { detect, detectVideo } from \"../shared/detect\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar Content = /*#__PURE__*/styled(\"div\")(function (_ref) {\n  var theme = _ref.theme;\n  return {\n    width: \"100%\",\n    height: \"100%\"\n  };\n});\nfunction ContentsBox() {\n  var _useState = useState({\n      net: null,\n      inputShape: [1, 0, 0, 3]\n    }),\n    _useState2 = _slicedToArray(_useState, 2),\n    model = _useState2[0],\n    setModel = _useState2[1]; // init model & input shape\n\n  var imageRef = useRef(null);\n  var cameraRef = useRef(null);\n  var videoRef = useRef(null);\n  var canvasRef = useRef(null);\n\n  // model configs\n  // const modelName = \"yolov8n\";\n\n  // useEffect(() => {\n  //   tf.ready().then(async () => {\n  //     const yolov8 = await tf.loadGraphModel(\n  //       `${window.location.href}/${modelName}_web_model/model.json`,\n  //       {\n  //         onProgress: (fractions) => {\n  //           // setLoading({ loading: true, progress: fractions }); // set loading fractions\n  //         },\n  //       }\n  //     ); // load model\n\n  //     // warming up model\n  //     const dummyInput = tf.ones(yolov8.inputs[0].shape);\n  //     const warmupResults = yolov8.execute(dummyInput);\n\n  //     // setLoading({ loading: false, progress: 1 });\n  //     setModel({\n  //       net: yolov8,\n  //       inputShape: yolov8.inputs[0].shape,\n  //     }); // set model & input shape\n\n  //     tf.dispose([warmupResults, dummyInput]); // cleanup memory\n  //   });\n  // }, []);\n\n  return /*#__PURE__*/_jsxs(Content, {\n    children: [/*#__PURE__*/_jsx(\"image\", {\n      src: \"#\",\n      alt: \"image-result\",\n      onLoad: function onLoad() {\n        return detect(imageRef.current, model, canvasRef.current);\n      }\n    }), /*#__PURE__*/_jsx(\"video\", {\n      autoPlay: true,\n      muted: true,\n      onPlay: function onPlay() {\n        return detectVideo(cameraRef.current, model, canvasRef.current);\n      }\n    }), /*#__PURE__*/_jsx(\"video\", {\n      autoPlay: true,\n      muted: true,\n      onPlay: function onPlay() {\n        return detectVideo(videoRef.current, model, canvasRef.current);\n      }\n    })]\n  });\n}\nexport default ContentsBox;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}